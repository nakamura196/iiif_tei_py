# iiif_tei_py

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

Google Cloud Vision API を使って、OCR した結果を有する TEI/XML を作成する

## Install

```sh
pip install iiif_tei_py
```

## How to use

```python
from iiif_tei_py.iiif import IIIFClient
from iiif_tei_py.tei import TEIClient
from dotenv import load_dotenv
import os
```

### Prepare `.env` file

```txt:.env
GOOGLE_APPLICATION_CREDENTIALS=your_google_cloud_vision_api_key.json
```

```python
load_dotenv()  # take environment variables from .env.
cred_path = os.getenv("GOOGLE_APPLICATION_CREDENTIALS")
```

### Google Cloud Vision API を使って OCR する

```python
IIIFClient = IIIFClient()

url = "https://archives.bge-geneve.ch/iiif/mnt/md1/cache/bge_diffusion/rousseau_jeanjacquesead/ms_fr_225/ms_fr_00225_f001v_002/FOND.TIF/0,0,3436,4796/full/0/default.jpg"

iiif_manifest_file_path = "./tmp/output.json"

IIIFClient.create_manifest3_by_gocr(url, cred_path, iiif_manifest_file_path, tmp_dir="./tmp")
```

### IIIF マニフェストファイルを TEI/XMl に変換する

```python
teiClient = TEIClient()
output_tei_xml_file_path = "./tmp/output.xml"
teiClient.convert_manifest3_annotations_to_zones(iiif_manifest_file_path, output_tei_xml_file_path)
```
